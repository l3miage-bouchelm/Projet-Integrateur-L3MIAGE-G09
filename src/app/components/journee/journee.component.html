
<button (click)="getCsvData()">Charger</button>

<button (click)="changeEtat()">CONFIRMER</button>
<section class="listes">
    <ng-container *ngFor="let sig of sigLists(); track sig; let i = index">
        <mat-list role="list" 
          cdkDropList 
          #L = "cdkDropList"
          [cdkDropListConnectedTo] = "sigDropListRefs()"
          (cdkDropListDropped)="dropIntoList(sig, $event)"
          >
          <div *ngIf="i === 0">Commandes ouvertes</div>
          <div *ngIf="i === 1">Commandes prevus</div>
          <ng-container *ngFor="let e of sig(); track sig">
            <mat-list-item cdkDrag [cdkDragData]="{sig: sig, value: e}">{{e}}</mat-list-item>
          </ng-container>
        </mat-list>
    </ng-container>
</section>
<hr>

@for (sig of sigLists(); track sig) {
    <code>{{sig() | json}}</code>
}


<div>{{commandes.length}}</div>
<div>{{commandeOuvert.length}}</div>
<div>{{commandePrevu.length}}</div>
<hr>
<button (click)="loadTournee()">LOAD</button>
<div *ngIf="tourneeV">
  <div class="container">
    <div  class="describe">Jour :</div>
    <select [(ngModel)]="day">
      <option [value]="'today'">Aujourd'hui</option>
      <option [value]="'tomorrow'">Demain</option>
    </select>
  </div>
<div *ngFor="let tournee of tournees; let i = index">
  <div *ngIf="isToday(tournee.id)">
  <div>tournee {{i}}</div>
  <app-tournee [camions]="camions" [entrepots]="entrepots" [livreurs]="livreurs" [commandes]="tournee.commandes" [clients]="clients" [id]="i" [name]="generateName(i)"></app-tournee>
  <div class="container">
    <div class="describe">Commandes :</div>
    <div *ngFor="let commande of commandePrevu" >
        <label class="checkbox-group">
        <input type="checkbox" [value]="commande.commande.reference" [disabled]="commande.disabled&&tournee.id!==commande.tourneeID" (change)="toggleSelectionCommande(commande,tournee.commandes,tournee.id)" [checked]="tournee.id===commande.tourneeID"> {{ commande.commande.reference }}
        </label>
    </div>
  </div>
  <button (click)="removeTournee(i)">Remove</button>
  </div>
</div>
<button (click)="addTournee()">Add Tournee</button>
</div>
<hr>
<select (click)="selectionnerCommande($event)" id="commande-select">
<option [value]=""> Commandes</option>
<option *ngFor="let commande of commandes" id="commande-select">{{commande.reference}}</option>
</select>
<table *ngIf="commandeSelectionnee"  id="commandeSelection">
    <tr *ngIf="commandeSelectionnee.reference">
      <td>Reference :</td><td>{{commandeSelectionnee.reference }}</td>
    </tr>
    <tr *ngIf="commandeSelectionnee.dateDeCreation">
      <td>Date de Creation : </td><td>{{commandeSelectionnee.dateDeCreation}}</td>
    </tr>
    <tr *ngIf="commandeSelectionnee.client">
      <td>Client :</td><td>{{nomClient?.prenom}} {{nomClient?.nom}}</td>
    </tr>
    <tr *ngIf="commandeSelectionnee.client">
      <td>Adresse :</td><td>{{nomClient?.adresse}} </td>
    </tr>
    <tr *ngIf="commandeSelectionnee.etat">
      <td>Etat :</td><td>{{commandeSelectionnee.etat }}</td>
    </tr>
    <tr *ngIf="commandeSelectionnee.ligne">
      <td>ligne :</td><td>{{commandeSelectionnee.ligne }}</td>
    </tr>
    <tr *ngIf="commandeSelectionnee.note">
      <td>heure :</td><td>{{commandeSelectionnee.note }}</td>
    </tr>
    <tr *ngIf="commandeSelectionnee.commantaire">
      <td>commentaire :</td><td>{{commandeSelectionnee.commantaire }}</td>
    </tr>
    <tr *ngIf="commandeSelectionnee.ligne">
      <td>commentaire :</td><td>{{commandeSelectionnee.ligne }}</td>
    </tr>
</table>